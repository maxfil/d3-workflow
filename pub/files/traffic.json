{
  "nodes": [
    {
      "name": "calls",
      "class": "circle",
      "x": 200,
      "y": 200
    },
    {
      "name": "select",
      "x": 300,
      "y": 200
    },
    {
      "name": "join",
      "x": 400,
      "y": 200
    },
    {
      "name": "calc1",
      "x": 500,
      "y": 150
    },
    {
      "name": "calc2",
      "x": 500,
      "y": 250
    },
    {
      "name": "calc3",
      "x": 600,
      "y": 200
    },
    {
      "name": "k-means",
      "x": 700,
      "y": 200
    },
    {
      "name": "result",
      "class": "circle",
      "x": 800,
      "y": 200
    }
  ],
  "links": [
    {
      "source": 0,
      "target": 1,
      "class": "dashed"
    },
    {
      "source": 1,
      "target": 2
    },
    {
      "source": 2,
      "target": 3
    },
    {
      "source": 2,
      "target": 4
    },
    {
      "source": 3,
      "target": 5
    },
    {
      "source": 4,
      "target": 5
    },
    {
      "source": 5,
      "target": 6
    },
    {
      "source": 6,
      "target": 7,
      "class": "dashed"
    }
  ],
  "tasks": [
    {
      "name": "calls",
      "node_id": "0",
      "json": {
        "calls": {
          "constraints": {
            "data_info": {
              "attributes": [
                {"customer_id": {"type": "Varchar(15)"}},
                {"coord": {"type": "(Integer, Integer)"}},
                {"time": {"type": "Integer"}}
              ]
            }
          }
        }
      }
    },
    {
      "name": "select",
      "node_id": "1",
      "json": {
        "select": {
          "constraints": {
            "input": {
              "data_info": {
                "attributes": [
                  "customer_id",
                  "coord",
                  "time"
                ]
              }
            },
            "output": {
              "data_info": {
                "attributes": [
                  "customer_id",
                  "coord",
                  "time"
                ]
              }
            },
            "op_specification": {
              "algorithm": {
                "select": {
                  "select_condition": [
                    "lb < input.coord < rb",
                    "st < input.time < et"
                  ]
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "join",
      "node_id": "2",
      "json": {
        "join": {
          "constraints": {
            "input1": {
              "data_info": {
                "attributes": ["customer_id"]
              }
            },
            "input2": {
              "data_info": {
                "attributes": ["customer_id"]
              }
            },
            "output1": {
              "data_info": {
                "attributes": [
                  "customer_id",
                  "coord1",
                  "coord2",
                  "time1",
                  "time2"
                ]
              }
            },
            "output2": {
              "data_info": {
                "attributes": [
                  "customer_id",
                  "coord1",
                  "coord2",
                  "time1",
                  "time2"
                ]
              }
            },
            "op_specification": {
              "algorithm": {
                "join": {
                  "join_condition": "input1.customer_id=input2.customer_id"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "calc1",
      "node_id": "3",
      "json": {
        "calc1": {
          "constraints": {
            "input": {
              "data_info": {
                "attributes": [
                  "coord1",
                  "coord2"
                ]
              }
            },
            "output": {
              "data_info": {
                "attributes": ["scoord"]
              }
            },
            "op_specification": {
              "algorithm": {
                "calc": [
                  {
                    "calc_attr": "scoord",
                    "calc_expression": "coord1-coord2"
                  }
                ]
              }
            }
          }
        }
      }
    },
    {
      "name": "calc2",
      "node_id": "4",
      "json": {
        "calc2": {
          "constraints": {
            "input": {
              "data_info": {
                "attributes": [
                  "time1",
                  "time2"
                ]
              }
            },
            "output": {
              "data_info": {
                "attributes": ["stime"]
              },
              "algorithm": {
                "sort": {
                  "sortingOrder": ["stime"]
                }
              }
            },
            "op_specification": {
              "algorithm": {
                "calc": [
                  {
                    "calc_attr": "stime",
                    "calc_expression": "time1-time2"
                  }
                ]
              }
            }
          }
        }
      }
    },
    {
      "name": "calc3",
      "node_id": "5",
      "json": {
        "calc3": {
          "constraints": {
            "input": {
              "data_info": {
                "attributes": [
                  "scoord",
                  "stime"
                ]
              }
            },
            "output": {
              "data_info": {
                "attributes": ["speed"]
              }
            },
            "op_specification": {
              "algorithm": {
                "calc": [
                  {
                    "calc_attr": "speed",
                    "calc_expression": "scoord/stime"
                  }
                ]
              }
            }
          }
        }
      }
    },
    {
      "name": "k-means",
      "node_id": "6",
      "json": {
        "k-means": {
          "constraints": {
            "input": {
              "data_info": {
                "attributes": ["speed"]
              }
            },
            "output1..n": {
              "data_info": {
                "attributes": [
                  "speed",
                  "type"
                ]
              }
            },
            "op_specification": {
              "algorithm": {
                "clustering": {
                  "criteria": "speed_limits"
                }
              }
            }
          }
        }
      }
    },
    {
      "name": "result",
      "node_id": "7",
      "json": {}
    }
  ]
}