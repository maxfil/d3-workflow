{"nodes":[{"index":0,"name":"reviews","type":"circle","weight":1,"x":750.9085720468715,"y":323.6726567492087,"px":750.7968263852911,"py":323.67262198346066,"fixed":0},{"index":1,"name":"buffer","type":"rect","weight":2,"x":733.9892447450862,"y":229.40450210615722,"px":733.9042468596659,"py":229.45888792020338,"fixed":0},{"index":2,"name":"filter","type":"rect","weight":2,"x":679.7001788770613,"y":150.40923687710955,"px":679.6247870743613,"py":150.50988547784777,"fixed":0},{"index":3,"name":"convert","type":"rect","weight":2,"x":591.8387289121757,"y":109.57606509119768,"px":591.8247775747834,"py":109.686742369578},{"index":4,"name":"products","type":"circle","weight":1,"x":452.40203701332183,"y":140.95937280673084,"px":452.47631429259286,"py":141.04888836269762},{"index":5,"name":"select","type":"rect","weight":3,"x":536.31362475767,"y":186.71032724627315,"px":536.3464467742607,"py":186.7812733313358},{"index":6,"name":"avgSent","type":"rect","weight":2,"x":595.0092707736279,"y":268.5999332137634,"px":595.014267356548,"py":268.63820710566813,"fixed":0},{"index":7,"name":"sales","type":"circle","weight":1,"x":358.77670623569156,"y":254.54963969602912,"px":358.9335445417841,"py":254.60162464298583,"fixed":0},{"index":8,"name":"filter","type":"rect","weight":2,"x":427.755608303888,"y":318.988062327252,"px":427.8686619995126,"py":319.0334291963581,"fixed":0},{"index":9,"name":"totalSales","type":"rect","weight":2,"x":522.0090931958632,"y":333.22331507401344,"px":522.0875534311645,"py":333.1443527357297},{"index":10,"name":"join1","type":"rect","weight":3,"x":613.4582415518742,"y":367.5135129965482,"px":613.4263751985535,"py":367.51325598458607},{"index":11,"name":"campaign","type":"circle","weight":1,"x":381.1882305542324,"y":432.3628361442891,"px":381.2662126915402,"py":432.26982440111493},{"index":12,"name":"filter","type":"rect","weight":2,"x":467.9362636286999,"y":473.53837781886057,"px":467.9322281183332,"py":473.44748880186114},{"index":13,"name":"join2","type":"rect","weight":3,"x":560.6835710137667,"y":449.60847314697264,"px":560.6337319544394,"py":449.5207158795139},{"index":14,"name":"result","type":"circle","weight":1,"x":636.7716998325706,"y":502.7953969828796,"px":636.6370704998799,"py":502.7305533243243}],"edges":[{"source":{"index":0,"name":"reviews","type":"circle","weight":1,"x":750.9085720468715,"y":323.6726567492087,"px":750.7968263852911,"py":323.67262198346066,"fixed":0},"target":{"index":1,"name":"buffer","type":"rect","weight":2,"x":733.9892447450862,"y":229.40450210615722,"px":733.9042468596659,"py":229.45888792020338,"fixed":0},"value":1,"dashed":true},{"source":{"index":1,"name":"buffer","type":"rect","weight":2,"x":733.9892447450862,"y":229.40450210615722,"px":733.9042468596659,"py":229.45888792020338,"fixed":0},"target":{"index":2,"name":"filter","type":"rect","weight":2,"x":679.7001788770613,"y":150.40923687710955,"px":679.6247870743613,"py":150.50988547784777,"fixed":0},"value":1},{"source":{"index":2,"name":"filter","type":"rect","weight":2,"x":679.7001788770613,"y":150.40923687710955,"px":679.6247870743613,"py":150.50988547784777,"fixed":0},"target":{"index":3,"name":"convert","type":"rect","weight":2,"x":591.8387289121757,"y":109.57606509119768,"px":591.8247775747834,"py":109.686742369578},"value":1},{"source":{"index":3,"name":"convert","type":"rect","weight":2,"x":591.8387289121757,"y":109.57606509119768,"px":591.8247775747834,"py":109.686742369578},"target":{"index":5,"name":"select","type":"rect","weight":3,"x":536.31362475767,"y":186.71032724627315,"px":536.3464467742607,"py":186.7812733313358},"value":1},{"source":{"index":4,"name":"products","type":"circle","weight":1,"x":452.40203701332183,"y":140.95937280673084,"px":452.47631429259286,"py":141.04888836269762},"target":{"index":5,"name":"select","type":"rect","weight":3,"x":536.31362475767,"y":186.71032724627315,"px":536.3464467742607,"py":186.7812733313358},"value":1,"dashed":true},{"source":{"index":5,"name":"select","type":"rect","weight":3,"x":536.31362475767,"y":186.71032724627315,"px":536.3464467742607,"py":186.7812733313358},"target":{"index":6,"name":"avgSent","type":"rect","weight":2,"x":595.0092707736279,"y":268.5999332137634,"px":595.014267356548,"py":268.63820710566813,"fixed":0},"value":1},{"source":{"index":6,"name":"avgSent","type":"rect","weight":2,"x":595.0092707736279,"y":268.5999332137634,"px":595.014267356548,"py":268.63820710566813,"fixed":0},"target":{"index":10,"name":"join1","type":"rect","weight":3,"x":613.4582415518742,"y":367.5135129965482,"px":613.4263751985535,"py":367.51325598458607},"value":1},{"source":{"index":7,"name":"sales","type":"circle","weight":1,"x":358.77670623569156,"y":254.54963969602912,"px":358.9335445417841,"py":254.60162464298583,"fixed":0},"target":{"index":8,"name":"filter","type":"rect","weight":2,"x":427.755608303888,"y":318.988062327252,"px":427.8686619995126,"py":319.0334291963581,"fixed":0},"value":1,"dashed":true},{"source":{"index":8,"name":"filter","type":"rect","weight":2,"x":427.755608303888,"y":318.988062327252,"px":427.8686619995126,"py":319.0334291963581,"fixed":0},"target":{"index":9,"name":"totalSales","type":"rect","weight":2,"x":522.0090931958632,"y":333.22331507401344,"px":522.0875534311645,"py":333.1443527357297},"value":1},{"source":{"index":9,"name":"totalSales","type":"rect","weight":2,"x":522.0090931958632,"y":333.22331507401344,"px":522.0875534311645,"py":333.1443527357297},"target":{"index":10,"name":"join1","type":"rect","weight":3,"x":613.4582415518742,"y":367.5135129965482,"px":613.4263751985535,"py":367.51325598458607},"value":1},{"source":{"index":10,"name":"join1","type":"rect","weight":3,"x":613.4582415518742,"y":367.5135129965482,"px":613.4263751985535,"py":367.51325598458607},"target":{"index":13,"name":"join2","type":"rect","weight":3,"x":560.6835710137667,"y":449.60847314697264,"px":560.6337319544394,"py":449.5207158795139},"value":1},{"source":{"index":11,"name":"campaign","type":"circle","weight":1,"x":381.1882305542324,"y":432.3628361442891,"px":381.2662126915402,"py":432.26982440111493},"target":{"index":12,"name":"filter","type":"rect","weight":2,"x":467.9362636286999,"y":473.53837781886057,"px":467.9322281183332,"py":473.44748880186114},"value":1,"dashed":true},{"source":{"index":12,"name":"filter","type":"rect","weight":2,"x":467.9362636286999,"y":473.53837781886057,"px":467.9322281183332,"py":473.44748880186114},"target":{"index":13,"name":"join2","type":"rect","weight":3,"x":560.6835710137667,"y":449.60847314697264,"px":560.6337319544394,"py":449.5207158795139},"value":1},{"source":{"index":13,"name":"join2","type":"rect","weight":3,"x":560.6835710137667,"y":449.60847314697264,"px":560.6337319544394,"py":449.5207158795139},"target":{"index":14,"name":"result","type":"circle","weight":1,"x":636.7716998325706,"y":502.7953969828796,"px":636.6370704998799,"py":502.7305533243243},"value":1,"dashed":true}],"tasks":[{"name":"tweets reviews","node_id":"0","json":{"tweets&reviews":{"constraints":{"data_info":{"attributes":[{"user":{"type":"Varchar(15)"}},{"text":{"type":"Varchar"}},{"coord":{"type":"(Integer, Integer)"}},{"timestamp":{"type":"Integer"}}]}}}}},{"name":"buffer","node_id":"1","json":{}},{"name":"filter by reg&date","node_id":"2","json":{"filter_by_reg&date":{"constraints":{"input":{"data_info":{"attributes":["text","coord","timestamp"]}},"output":{"data_info":{"attributes":["text","coord","timestamp"]}},"op_specification":{"algorithm":{"select":{"select_condition":["convert(coord) = reg","convert(timestamp) >= sD"]}}}}}}},{"name":"calc&conv","node_id":"3","json":{"calc&conv":{"constraints":{"input":{"data_info":{"attributes":["text","coord","timestamp"]}},"output":{"data_info":{"attributes":["tag","sentiment","region","date"]}},"op_specification":{"algorithm":{"calc":[{"calc_attr":"tag","calc_expression":"analyse(text)"},{"calc_attr":"sentiment","calc_expression":"analyse(text)"},{"calc_attr":"region","calc_expression":"convert(coord)"},{"calc_attr":"date","calc_expression":"convert(timestamp)"}]}}}}}},{"name":"products","node_id":"4","json":{"products":{"constraints":{"data_info":{"attributes":[{"product_id":{"type":"Varchar(15)"}},{"product":{"type":"Varchar(15)"}}]}}}}},{"name":"select product","node_id":"5","json":{"select_product":{"constraints":{"input1":{"data_info":{"attributes":["tag","sentiment","coord","timestamp"]}},"input2":{"data_info":{"attributes":["product_id","product"]}},"output":{"data_info":{"attributes":["product_id","sentiment","coord","timestamp"]}},"op_specification":{"algorithm":{"select":{"select_condition":["compare(product, tag)"]}}}}}}},{"name":"calc avgSent","node_id":"6","json":{"calc_avgSent":{"constraints":{"input":{"data_info":{"attributes":["product_id","sentiment","region","date"]}},"output":{"data_info":{"attributes":["product_id","avgSentiment","region","date"]}},"op_specification":{"algorithm":{"calc":[{"calc_attr":"avgSentiment","calc_expression":"avg(sentiment)"}],"groupBy":["date","product_id","region"]}}}}}},{"name":"sales","node_id":"7","json":{"sales":{"constraints":{"data_info":{"attributes":[{"product_id":{"type":"Varchar(15)"}},{"region":{"type":"Varchar(15)"}},{"date":{"type":"Integer"}},{"quantity":{"type":"Integer"}},{"price":{"type":"Integer"}}]}}}}},{"name":"filter by prod&reg","node_id":"8","json":{"filter_by_prod&reg":{"constraints":{"input":{"data_info":{"attributes":["product_id","date","quantity","price","region"]}},"output":{"data_info":{"attributes":["product_id","date","quantity","price","region"]}},"op_specification":{"algorithm":{"select":{"select_condition":["product_id = pId","region = reg","date = sD"]}}}}}}},{"name":"calc totalSales","node_id":"9","json":{"calc_totalSales":{"constraints":{"input":{"data_info":{"attributes":["product_id","date","quantity","price","region"]}},"output":{"data_info":{"attributes":["product_id","region","date","totalSales"]}},"op_specification":{"algorithm":{"calc":[{"calc_attr":"totalSales","calc_expression":"quantity*price"}],"groupBy":["date","product_id","region"]}}}}}},{"name":"join1 by prod&reg","node_id":"10","json":{"join1_by_prod&reg":{"constraints":{"input1":{"data_info":{"attributes":["product_id","avgSentiment","region","date"]}},"input2":{"data_info":{"attributes":["product_id","region","date","totalSales"]}},"output":{"data_info":{"attributes":["product_id","avgSentiment","totalSales","region","date"]}},"op_specification":{"algorithm":{"join":{"join_condition":["input1.product_id = input2.product_id","input1.region = input2.region","input1.date = input2.date"]}}}}}}},{"name":"campaign","node_id":"11","json":{"campaign":{"constraints":{"data_info":{"attributes":[{"campaign_id":{"type":"Varchar(15)"}},{"product_id":{"type":"Varchar(15)"}},{"region":{"type":"Varchar(15)"}},{"start_date":{"type":"Integer"}},{"end_date":{"type":"Integer"}}]}}}}},{"name":"filter by prod&reg","node_id":"12","json":{"filter_by_prod&reg":{"constraints":{"input":{"data_info":{"attributes":["campaign_id","product_id","region","start_date","end_date"]}},"output":{"data_info":{"attributes":["campaign_id","product_id","region","start_date","end_date"]}},"op_specification":{"algorithm":{"select":{"select_condition":["product_id = pId","region = reg","start_date >= sD"]}}}}}}},{"name":"join2 by prod&reg","node_id":"13","json":{"join2_by_prod&reg":{"constraints":{"input1":{"data_info":{"attributes":["product_id","avgSentiment","totalSales","region","date"]}},"input2":{"data_info":{"attributes":["campaign_id","product_id","region","start_date","end_date"]}},"output":{"data_info":{"attributes":["campaign_id","product_id","avgSentiment","totalSales","region"]}},"op_specification":{"algorithm":{"join":{"join_condition":["input1.product_id = input2.product_id","input1.region = input2.region"]}}}}}}},{"name":"result","node_id":"14","json":{"result":{"constraints":{"data_info":{"attributes":[{"campaign_id":{"type":"Varchar(15)"}},{"product_id":{"type":"Varchar(15)"}},{"region":{"type":"Varchar(15)"}},{"avgSentiment":{"type":"Integer"}},{"totalSales":{"type":"Integer"}}]}}}}}]}